<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
    <link rel = "stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
    <title>My Webpage</title>
</head>
<body>
    <div class = "banner">
    {{ Event.name }}
    {{ Event.organiser }}
    {{ Event.description }}
    </div>

    {% for teamId, team in Event.teams.iteritems() %}
    	<div id = "{{ teamId }}" class = "teams"
        {% if User.team != teamId %}
        	class = "droppableTeam"
        {% endif %}
        >
        	<div> Team {{ loop.index }} </div>
            {% if User.team == teamId %}
            	<div id = "user" class = "editable" title = "{{ User.skills }}"> {{ User.name }} </div>
            {% endif %}
            {% for member in team %}
            		<div class = "non-editable" title = "{{ member.skills }}"> {{ member.name }} </div>
            {% endfor %}
        </div>
    {% endfor %}
   	<ul>
    {% if User.team == "" %}
    <li id = "user" class="editable" title="{{ User.skills }}"> {{ User.name }}
    </li>
    {% endif %}        
   	{% for participant in Event.nonteam %}
    	<li class = "non-editable" title = "{{ participant.skills }}"> {{ participant.name }} 
        	<button onClick="formTeam('{{ participant.url }}')">Request to make Team</button>
        </li>
    {% endfor %}
    </ul>
</body>
<script>
	var currentUser = "{{ User.url }}";
</script>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<script src="../js/index.js"></script>
<script type="text/javascript">
	
	$(".droppableTeams").droppable({
		tolerance: "pointer",
		hoverClass: "ui-state-active",
		accept: "#user",
		revert: 'invalid',
		activeClass: "ui-state-hover",
		drop: function(event, ui){
			if(this == $(event.draggable).parent())
			{
				return;
			}
			else
			{
            	alert();
				//joinTeam($(this).attr('id'));
			}
		}
	});
	
	$("#user").draggable();
</script>
</html>
